# Мобильное приложение "Прогноз погоды"

## Описание
Приложение предназначено для отображения информации о температуре в различных городах. Пользователь выбирает город из списка, либо добавляет интересующий, если его нет в списке, после чего приложение обращается к API и показывает прогноз на две недели вперёд. Для каждого дня указывается минимальная и максимальная температура, скорость ветра и уровень осадков, а также простая иконка, отражающая текущее состояние погоды. Также на экране пользователь может отдельно видеть погоду в городе на данный момент и на последующие дни. 
Для создания интерфейса использовался Jetpack Compose, а для выполнения сетевых запросов – Retrofit. Также приложение использует архитектуру MVVM (Model-View-ViewModel). Управление состоянием и логикой реализовано с помощью ViewModel. В приложении задействованы два API: один для получения координат города, другой – для получения погодных данных на их основе.

## Демонстрация работы приложения

<img src="app/src/main/res/drawable/app_presentation_final.gif" alt="ScreenCast" width="400"/>

## Архитектура проекта
com.example.weatherapp  
├── data  
│   ├── api  
│   │   ├── ApiService.kt  
│   │   ├── CoordinatesApi.kt  
│   │   └── WeatherApi.kt  
│   ├── models  
│   │   ├── CityCoordinatesResponse.kt  
│   │   ├── DailyForecast.kt  
│   │   ├── HourlyForecast.kt  
│   │   └── WeatherResponse.kt  
│   └── repositories  
│       ├── CoordinatesRepository.kt  
│       └── WeatherRepository.kt  
│  
├── domain  
│   ├── model  
│   │   └── ...  
│   └── usecases  
│       ├── GetCoordinatesUseCase.kt  
│       └── GetWeatherUseCase.kt  
│
├── presentation  
│   ├── ui  
│   │   ├── components  
│   │   │   ├── CityBackground.kt    
│   │   │   ├── CityCard.kt    
│   │   │   ├── CityHeader.kt    
│   │   │   ├── CitySearchBar.kt    
│   │   │   ├── WeatherBackground.kt    
│   │   │   ├── WeatherCard.kt    
│   │   │   ├── WeatherCurrentCard.kt    
│   │   │   ├── WeatherHeader.kt    
│   │   │   ├── WeatherIcon.kt    
│   │   │   └── WeatherIsLoading.kt  
│   │   └── screen    
│   │       ├── CitySelectionScreen.kt    
│   │       └── WeatherScreen.kt    
│   └── viewmodels      
│       ├── WeatherViewModel.kt      
│       └── WeatherViewModelFactory.kt      
│      
├── ui.theme    
│   └── (цвета, типографика, темы)    
│    
└── MainActivity.kt  

## Структура проекта

### 1. Data layer

#### API Интерфейсы:
- **CoordinatesApi**: Интерфейс для получения координат города.
- **WeatherApi**: Интерфейс для получения данных о погоде на основе координат.

#### Модели данных:
- **CityCoordinatesResponse**: Представляет ответ, содержащий детали о городе, такие как название, широта, долгота и т.д.
- **WeatherResponse**: Содержит ежедневные и почасовые прогнозы погоды.
- **DailyForecast** и **HourlyForecast**: Модели для ежедневных и почасовых данных о погоде.

#### Репозитории:
- **CoordinatesRepository**: Обрабатывает запросы на получение координат города из API.
- **WeatherRepository**: Обрабатывает запросы на получение данных о погоде из API.

### 2. Domain layer

#### Usecases:
- **GetCoordinatesUseCase**: Получает координаты для заданного названия города.
- **GetWeatherUseCase**: Получает данные о погоде на основе широты и долготы.

### 3. UI layer

#### ViewModel:
- **WeatherViewModel**: Управляет данными, связанными с пользовательским интерфейсом, с учетом жизненного цикла. Получает данные о погоде при выборе города и предоставляет их интерфейсу.

#### UI Компоненты:
- **WeatherCard**: Отображает индивидуальную информацию о погоде для конкретной даты.
- **WeatherDropdownMenu**: Позволяет пользователям выбрать город из выпадающего списка.
- **WeatherScreen**: Основной экран, который объединяет выпадающее меню и отображает информацию о погоде с помощью карточек.

### 4. MainActivity
Точка входа в приложение, где инициализируются зависимости, включая репозитории и используемые случаи. ViewModel создается с использованием паттерна фабрики для передачи зависимостей.

## Ключевые особенности
- **Выбор и добавление города**: Пользователи могут выбрать город из списка для получения его данных о погоде или добавить новый город.
- **Состояние загрузки**: Отображает текст загрузки во время получения данных.
- **Обработка ошибок**: Логирует ошибки в случае неудачи при получении координат или данных о погоде.
- **Отображение погоды на ближайшие две недели**: Пользователь может увидеть погоду на ближайшие 14 дней. 


